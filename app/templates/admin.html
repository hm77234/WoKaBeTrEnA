{% extends "base.html" %}
{% block content %}
<div style="max-width:900px; margin:0 auto;">
    <!-- mutterlang + init -->
    <div style="background:#e3f2fd; padding:20px; border-radius:12px; margin-bottom:30px;">
        <h2>{{ t.admin }}</h2>
        <div style="display:flex; align-items:center; gap:15px;">
            <label>{{ t.mutter_label }}:</label>
            <strong style="font-size:1.2em;">{{ mutter.title() }}</strong>    
            <a href="/admin/reset-pairs" style="background:#FF9800; color:white; padding:8px 16px; text-decoration:none; border-radius:6px;">
                üîÑ {{ t.reset or 'Reset Pairs' }}
            </a>
        </div>
    </div>
    
    <!-- Language Pairs -->
    <h3>üåç {{ t.language_pairs or 'Language Pairs' }} ({{ pairs|length }})</h3>
    <!-- Ersetze den Pair-Loop in admin.html oder index.html durch dieses responsive Grid-Layout -->
<div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(320px,1fr)); gap:20px; margin:20px 0;">
    {% for pair in pairs %}
    <div style="
        background: linear-gradient(135deg, #f0f8ff 0%, #e3f2fd 100%);
        padding: 25px;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(33,150,243,0.1);
        border-left: 5px solid #2196F3;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    "
    onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 12px 40px rgba(33,150,243,0.2)'"
    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(33,150,243,0.1)'">
        
        <!-- Icon/Flag-Header -->
        <div style="display:flex; align-items:center; margin-bottom:15px;">
            <div style="font-size:48px; margin-right:15px;">{{ icons.language }}</div>
            <div>
                <h3 style="margin:0; color:#1976D2; font-weight:600;">{{ pair.nametitle }}</h3>
                <div style="color:#666; font-size:14px; text-transform:uppercase; letter-spacing:0.5px;">
                    {{ pair.name }}
                </div>
            </div>
        </div>
        
        <!-- Action Buttons (Grid) -->
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:20px;">
            <!-- Words Button -->
            <a href="/admin/words/{{ pair.name }}" 
               style="
                   background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
                   color:white; 
                   padding:14px 20px; 
                   text-decoration:none; 
                   border-radius:10px;
                   text-align:center;
                   font-weight:500;
                   transition: all 0.2s ease;
                   box-shadow: 0 4px 15px rgba(76,175,80,0.3);
               "
               onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(76,175,80,0.4)'"
               onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(76,175,80,0.3)'">
                {{ icons.words }}<br>
                <small style="font-size:12px;">{{ t.words or 'Words' }}</small>
            </a>
            
            <!-- Original Test Button -->
            <a href="/test/{{ pair.name }}" 
               style="
                   background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
                   color:white; 
                   padding:14px 20px; 
                   text-decoration:none; 
                   border-radius:10px;
                   text-align:center;
                   font-weight:500;
                   transition: all 0.2s ease;
                   box-shadow: 0 4px 15px rgba(33,150,243,0.3);
               "
               onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(33,150,243,0.4)'"
               onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(33,150,243,0.3)'">
                {{ icons.test }}<br>
                <small style="font-size:12px;">{{ t.test or 'Test' }}</small>
            </a>
            
            <!-- NEW: Declination Test Button (Full Width, Highlighted) -->
            <a href="/testdeclination/{{ pair.name }}" 
               style="
                   background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
                   color:white; 
                   padding:16px 24px; 
                   text-decoration:none; 
                   border-radius:12px;
                   text-align:center;
                   font-weight:600;
                   font-size:16px;
                   grid-column: 1 / -1;  /* Full width */
                   transition: all 0.2s ease;
                   box-shadow: 0 6px 20px rgba(255,152,0,0.4);
                   border: 2px solid rgba(255,152,0,0.2);
               "
               onmouseover="this.style.transform='scale(1.03)'; this.style.boxShadow='0 10px 30px rgba(255,152,0,0.5)'"
               onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 20px rgba(255,152,0,0.4)'">
                {{ icons.declination }} {{ t.declinationtest or 'Declination-Test' }}
            </a>
        </div>
        
   
    </div>
    {% endfor %}
</div>

    
    <!-- CSV Import -->
    <div style="background:#fff3e0; padding:25px; border-radius:12px; margin-top:30px;">
    <h3>üì• {{ t.import_csv }}</h3>
    <form method="POST" action="/admin/upload" enctype="multipart/form-data" style="display:flex; gap:15px; flex-wrap:wrap; align-items:end;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="file" name="csvfile" accept=".csv" required style="padding:12px; flex:1; min-width:250px;">
        <select name="language_pair" style="padding:12px; flex:1; min-width:200px;">
            {% for p in pairs %}
                <option value="{{ p.id }}">{{ p.name_title }}</option>
            {% endfor %}
        </select>
        <button type="submit" name="upload_csv" style="background:#FF5722; color:white; padding:12px 30px; border:none; border-radius:6px; font-weight:bold;">
            {{ t.import or 'Import' }}
        </button>
    </form>
    <small>Format: mutter_word,foreign_word,foreign_lang,info,groups<br>
           Groups: "Reisen;A1" (semicolon-separated)<br>
           Language from dropdown!
    </small>
</div>
</div>
{% endblock %}
